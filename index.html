<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handlevogn</title>
    <link rel="stylesheet" href="style.css"/>
    
</head>
<body>
    <div id="app"></div>

    <script>
        const app = document.getElementById('app');
        
        var store = [
        {
            item: 'Milk',
            price: 30,
            stock: 15,
            image: 'img/milk.png',
            cart: 0,
        },
        {
            item: 'Cereal',
            price: 20,
            stock: 10,
            image: 'img/cereal.png',
            cart: 0,
        },{
            item: 'Chocolate',
            price: 40,
            stock: 8,
            image: 'img/chocolate.png',
            cart: 0
        },{
            item: 'Friend',
            price: 10000,
            stock: 0,
            image: 'img/friend.png',
            cart: 0,
        }, ]
        var shoppingCart = []
        let sumtotal = 0

        updateview()
        function updateview(){
            app.innerHTML = /*HTML*/`

            <div class="page">
            <h1 class="header">OKMart</h1>

            <div class="store">
                <div class="items">${createstore()}</div>
                </div>

            <div class="shoppingCart">
                <h2 class="cartheader">Shopping Cart</h2>
                    ${updateCart()}
                    <div class="sumtotal">Totalt Ã¥ betale: ${sumtotal} kr</div>
           </div>
                
            
            </div>
            `;
        }

        function createstore(){
            let html = ''
            for( let i = 0; i < store.length; i++){
                html +=     `<div class="itemcontainer">
                                <div>${store[i].item}</div>
                                <div>${store[i].price} kr</div>
                                <div>${store[i].stock} left in stock</div>
                                <button class="addToCart" onclick="addToCart(${i})">Add to cart</button>
                                </div>
                                <img class="itemimage" src="${store[i].image}">            
                                `;
            }
            return html
        }

        function addToCart(i){
            if(store[i].stock > 0){
                 
            shoppingCart.push(store[i].item);
            store[i].stock --
            store[i].cart ++
            sumtotal = sumtotal + store[i].price;
                }
                else{
                    alert('Item out of stock')
                }
            
            updateview()
        }

         function updateCart(){  
            let itemsincart ="";
            
            for(let i = 0; i < shoppingCart.length; i++){

                  itemsincart += `<div class="item">${store[i].cart}x   ${shoppingCart[i]}</div>`;
             }
             return itemsincart
        }
    </script>

</body>
</html>